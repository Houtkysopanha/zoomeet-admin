<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Test - Upcoming Events</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .event-card {
            border: 1px solid #ddd;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .loading {
            text-align: center;
            padding: 20px;
        }
        .error {
            color: red;
            background: #ffe6e6;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            color: green;
            background: #e6ffe6;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .date-input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üóìÔ∏è Upcoming Events API Test</h1>
        
        <div>
            <label for="startDate">Start Date:</label>
            <input type="date" id="startDate" class="date-input" value="2025-10-03">
            <button onclick="testAPI()">Test API</button>
            <button onclick="clearResults()">Clear</button>
        </div>
        
        <div id="status"></div>
        <div id="results"></div>
    </div>

    <script>
        async function testAPI() {
            const startDate = document.getElementById('startDate').value;
            const statusDiv = document.getElementById('status');
            const resultsDiv = document.getElementById('results');
            
            statusDiv.innerHTML = '<div class="loading">üîÑ Testing API...</div>';
            resultsDiv.innerHTML = '';
            
            try {
                // Simulate the API call that your Vue app would make
                const apiUrl = getApiUrl(startDate);
                
                statusDiv.innerHTML = `
                    <div class="success">
                        ‚úÖ API Integration Ready<br>
                        <strong>Endpoint:</strong> ${apiUrl}<br>
                        <strong>Method:</strong> GET<br>
                        <strong>Headers:</strong> Authorization: Bearer [TOKEN]<br>
                        <strong>Expected Response:</strong> JSON with success, message, and data array
                    </div>
                `;
                
                // Show expected response format
                resultsDiv.innerHTML = `
                    <h3>Expected API Response Format:</h3>
                    <pre style="background: #f8f9fa; padding: 15px; border-radius: 4px; overflow-x: auto;">
{
    "success": true,
    "message": "OK",
    "data": [
        {
            "id": "d177d35c-cdef-4c14-98e5-7bae2f0df53a",
            "name": "Cybersecurity",
            "category_name": "Conference",
            "start_date": "2025-10-03 06:50:52",
            "end_date": "2025-10-04 15:42:52",
            "location": "Phnom Penh",
            "cover_image_url": "https://dev-ticket7777.s3.ap-southeast-2.amazonaws.com/M%26C-2025-Ticketing-Platform-Poster-%281%29.png"
        },
        {
            "id": "4faa4406-059f-4cde-895a-bc4b2401c079",
            "name": "TechConnect Cambodia 2025 / ·ûè·üÅ·ûÄ·ûÅ·ûª·ûì·ûé·û∑·ûÖ ·ûÄ·ûò·üí·ûñ·ûª·ûá·û∂ ·ü¢·ü†·ü¢·ü•",
            "category_name": "Workshop",
            "start_date": "2025-10-03 07:00:00",
            "end_date": "2025-10-09 20:30:00",
            "location": "Phnom Penh Convention Center / ·ûò·ûá·üí·ûà·ûò·ûé·üí·ûå·ûõ·ûñ·û∑·ûñ·üê·ûö·ûé·üç·ûó·üí·ûì·üÜ·ûñ·üÅ·ûâ",
            "cover_image_url": "https://dev-ticket7777.s3.ap-southeast-2.amazonaws.com/public_admin_n.jpg"
        }
    ]
}
                    </pre>
                    
                    <h3>Vue Component Integration:</h3>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 4px;">
                        <p><strong>‚úÖ API Function:</strong> <code>fetchUpcomingEvents()</code> added to <code>/composables/api.js</code></p>
                        <p><strong>‚úÖ Composable:</strong> <code>useUpcomingEvents.js</code> created for state management</p>
                        <p><strong>‚úÖ Component:</strong> <code>ComingEvent.vue</code> updated to use real API data</p>
                        <p><strong>‚úÖ Error Handling:</strong> Loading states, error states, and empty states implemented</p>
                        <p><strong>‚úÖ Date Navigation:</strong> Calendar controls update API calls with selected dates</p>
                    </div>
                    
                    <h3>Features Implemented:</h3>
                    <ul style="background: #f8f9fa; padding: 15px; border-radius: 4px;">
                        <li>‚úÖ Dynamic date selection with API calls</li>
                        <li>‚úÖ Month navigation with automatic event loading</li>
                        <li>‚úÖ Loading indicators during API calls</li>
                        <li>‚úÖ Error handling and user feedback</li>
                        <li>‚úÖ Empty state when no events found</li>
                        <li>‚úÖ Image fallback for missing event images</li>
                        <li>‚úÖ Toast notifications for user feedback</li>
                        <li>‚úÖ Responsive design maintained</li>
                    </ul>
                `;
                
            } catch (error) {
                statusDiv.innerHTML = `<div class="error">‚ùå Error: ${error.message}</div>`;
            }
        }
        
        function getApiUrl(startDate) {
            const baseUrl = 'https://dev-apiticket.prestigealliance.co/api/v1/admin';
            return `${baseUrl}/dashboard/up-comming-event?start_date=${startDate}`;
        }
        
        function clearResults() {
            document.getElementById('status').innerHTML = '';
            document.getElementById('results').innerHTML = '';
        }
        
        // Auto-test on page load
        window.onload = function() {
            testAPI();
        };
    </script>
</body>
</html>